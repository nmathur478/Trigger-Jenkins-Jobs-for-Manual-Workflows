name: Fetch Jenkins Build Console Output

on:
  push:
    branches:
      - main

jobs:
  fetch-console-output:
    runs-on: ubuntu-latest
    env:
      JENKINS_URL: ${{ secrets.JENKINS_URL }}

    steps:
    - name: Checkout repository (clone the repo for use)
      uses: actions/checkout@v4
      with:
        fetch-depth: 0

    - name: Fetching console output
      run: python main.py
    
        

        # Fetch console output using Jenkins REST API
        #CONSOLE_OUTPUT=$(curl -s "${JENKINS_URL}/job/${JOB_NAME}/${BUILD_NUMBER}/consoleText" --user "${JENKINS_USER}:${JENKINS_TOKEN}")

        # Print console output
        #echo "${CONSOLE_OUTPUT}"

